# Setting Up

### Table of Contents
- [Organization](#organization)
	- [Bookmarks](#bookmarks)
	- [Password Manager](#password-manager)
	- [Updates and Automation](#updates-and-automation)
	- [Note Taking](#note-taking)
- [Virtualization](#virtualization)
- [Containers](#containers)
	- [Docker](#docker)
	- [Vagrant](#vagrant)
- [Linux](#linux)
	- [Penetration Testing Distros](#penetration-testing-distros)
	- [VM](#vm)
	- [Terminal Modification](#terminal-modification)
	- [Automation](#automation)
- [Windows](#windows)

## Organization

Set up directory structure by OS:

```
tree .

.
└── Penetration-Testing
	│
	├── Pre-Engagement
	│       └── ...
    ├── Linux
    │   ├── Information-Gathering
    │   │   └── ...
    │   ├── Vulnerability-Assessment
    │   │   └── ...
    │   ├── Exploitation
    │   │   └── ...
    │   ├── Post-Exploitation
    │   │   └── ...
    │   └── Lateral-Movement
    │       └── ...
    ├── Windows
    │   ├── Information-Gathering
    │   │   └── ...
    │   ├── Vulnerability-Assessment
    │   │   └── ...
    │   ├── Exploitation
    │   │   └── ...
    │   ├── Post-Exploitation
    │   │   └── ...
    │   └── Lateral-Movement
    │       └── ...
    ├── Reporting
    │   └── ...
	└── Results
	    └── ...
```

According to penetration testing fields:

```
tree .

.
└── Penetration-Testing
	│
	├── Pre-Engagement
	│       └── ...
    ├── Network-Pentesting
	│       ├── Linux
	│       │   ├── Information-Gathering
	│		│   │   └── ...
	│       │   ├── Vulnerability-Assessment
    │       │   │	└── ...
    │       │	└── ...
    │       │    	└── ...
    │		├── Windows
    │ 		│   ├── Information-Gathering
    │		│   │   └── ...
    │		│   └── ...
    │       └── ...
    ├── WebApp-Pentesting
	│       └── ...
    ├── Social-Engineering
	│       └── ...
    ├── .......
	│       └── ...
    ├── Reporting
    │   └── ...
	└── Results
	    └── ...
```

### Bookmarks

Create a penetration test firefox account for add-ons and bookmarks (**no sensitive information shold be stored**)

### Password Manager

Use a password manager to store credentials that you will need on an engagement. Can also be used for 
encrypted storage of sensitive notes

### Updates and Automation

Make sure to update the components used in engagements before starting a new penetration test. Record all 
resources and their sources in a file. We can then automate this and store the script in our password manager

### Note Taking

5 main types of information to note:

1. Newly discovered information:

	IP addresses, usernames, passwords, source code, etc., anything identified and related to the engagement 
	and process

2. Ideas for further tests and processing:

	Write down everything we see that should be investigated. Good tools for this are [Notion](https://notion.so), [Obsidian](https://obsidian.md), and [Xmind](https://www.xmind.net)

3. Scan results:
	
	Keeping and organizing scan results is critical, use tools like [Ghostwriter](https://github.com/GhostManager/Ghostwriter) or [Pwndoc](https://github.com/pwndoc/pwndoc) to generate documentation

4. Logging:

	We can use `script` and `date` in bash to monitor what commands are executed, when they are executed, 
	and log	the information to a file

	Replace the `PS1` variable (`PROMPT` in `.zshrc`) in our `.bashrc` with the following to display the
	date and time:

	`PS1="\[\033[1;32m\]\342\224\200\$([[ \$(/opt/vpnbash.sh) == *\"10.\"* ]] && echo \"[\[\033[1;34m\]\$(/opt/vpnserver.sh)\[\033[1;32m\]]\342\224\200[\[\033[1;37m\]\$(/opt/vpnbash.sh)\[\033[1;32m\]]\342\224\200\")[\[\033[1;37m\]\u\[\033[01;32m\]@\[\033[01;34m\]\h\[\033[1;32m\]]\342\224\200[\[\033[1;37m\]\w\[\033[1;32m\]]\n\[\033[1;32m\]\342\224\224\342\224\200\342\224\200\342\225\274 [\[\e[01;33m\]$(date +%D-%r)\[\e[01;32m\]]\\$ \[\e[0m\]"`

	To start logging with `script` (linux):

	```
	# Start logging
	$ script <date>-<start-time>-<name>.log	
	# Stop logging
	$ exit
	```

	To start logging with `Start-Transcript` (Windows):

	```
	// Start logging
	C:\> Start-Transcript -Path "C:\Pentesting\<date>-<start-time>-<name>.log`
	// Stop logging
	C:\> Stop-Transcript
	```

	Use `tee` and stdout redirection to log scan results in bash, and `Out-File` and stdout redirection in 
	Windows

5. Screenshots
	
	Take screenshots for proof of exploitation and results obtained, required for the PoC and our docs.
	[Flameshot](https://github.com/flameshot-org/flameshot) for screenshots and [Peek](https://github.com/phw/peek) for recording.


## Virtualization

VMWare Workstation Pro/Player or VirtualBox

## Containers

A container cannot be defined as a virtual machine but as an isolated group of processes running on a single 
host that corresponds to a complete application, including its configuration and dependencies.

### Docker

**Docker Installation:**

```
$ sudo apt update && sudo apt install docker.io -y
```

```
C:\> IEX((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))
C:\> choco upgrade chocolatey
C:\> choco install docker-desktop
```

### Vagrant

[Vagrant](https://www.vagrantup.com/) is a tool that can create, configure and manage VMs or VM environments

**Vagrant installation:**

```
sudo apt update && sudo apt install virtualbox virtualbox-dkms vagrant -y
```

```
C:\> IEX((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))
C:\> choco upgrade chocolatey
C:\> cinst virtualbox cyg-get vagrant
```

## Linux

### Penetration Testing Distros

- [ParrotOS](https://www.parrotsec.org/)
- [Kali](https://kali.org)
- [BlackArch](https://blackarch.org)
- [BackBox](https://linux.backbox.org/)

### VM

- Encrypt the drive
- Take snapshot after fresh install
- Update the distro
- Install tools (curate a tools file, `sudo apt install $(cat tools.txt | tr "\n" " ") -y`)
- Clone github repos
- Take a snapshot after updates and tool installation
- Encrypt the VM (VMWare Workstation: VM settings -> Access Control)

### Terminal Modification

**Terminal emulators/multiplexers:**

- [Terminator](https://terminator-gtk3.readthedocs.io/en/latest/)
- [Guake](http://guake-project.org/)
- [iTerm2](https://iterm2.com/)
- [Terminology](https://www.enlightenment.org/docs/apps/terminology.md)
- [Tmux](https://github.com/tmux/tmux/wiki) - [Ippsec's intro to Tmux](https://youtu.be/Lqehvpe_djs)

We can modifiy our bash prompt easily with [The Bash Prompt Generator](https://bash-prompt-generator.org/)

Customise the desktop manager - [Reddit community](https://www.reddit.com/r/unixporn/)

### Automation

Automate any modifications into scripts then host on a VPS, we can then download and execute the scripts for 
an easy VM set up

## Windows


